{
  "info": {
    "name": "Waymore Transactional Emails Service API",
    "description": "Complete API collection for the Waymore Transactional Emails Service. Includes authentication, email sending, status checking, admin monitoring endpoints, and webhook testing.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.0.0"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{jwt_token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:3000",
      "type": "string"
    },
    {
      "key": "jwt_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "recipient_email",
      "value": "test@example.com",
      "type": "string"
    },
    {
      "key": "recipient_name",
      "value": "Test User",
      "type": "string"
    },
    {
      "key": "user_firstname",
      "value": "John",
      "type": "string"
    },
    {
      "key": "product_name",
      "value": "Waymore Platform",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Get JWT Token",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/test-token",
              "host": ["{{base_url}}"],
              "path": ["test-token"]
            },
            "description": "Get a JWT token for API authentication. This is a development endpoint that generates a test token valid for 1 hour."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.token) {",
                  "        pm.collectionVariables.set('jwt_token', response.token);",
                  "        console.log('JWT token automatically set in collection variables');",
                  "        console.log('Token expires in:', response.expiresIn);",
                  "    } else {",
                  "        console.log('No token found in response');",
                  "    }",
                  "} else {",
                  "    console.log('Failed to get JWT token. Status:', pm.response.code);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/test-token",
                  "host": ["{{base_url}}"],
                  "path": ["test-token"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n  \"expiresIn\": \"1 hour\",\n  \"scopes\": [\"emails:send\", \"emails:read\"]\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "Email Operations",
      "item": [
        {
          "name": "Send Email - Basic Template",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Idempotency-Key",
                "value": "{{$timestamp}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"from\": {\n    \"email\": \"marketing@waymore.io\",\n    \"name\": \"Waymore Team\"\n  },\n  \"subject\": \"Welcome to Waymore Platform\",\n  \"template\": {\n    \"key\": \"transactional\",\n    \"locale\": \"en\"\n  },\n  \"to\": [\n    {\n      \"email\": \"{{recipient_email}}\",\n      \"name\": \"{{recipient_name}}\"\n    }\n  ],\n  \"variables\": {\n    \"workspace_name\": \"Acme Corp\",\n    \"user_firstname\": \"{{user_firstname}}\",\n    \"product_name\": \"{{product_name}}\",\n    \"support_email\": \"support@waymore.io\",\n    \"email_title\": \"Welcome to Waymore!\",\n    \"custom_content\": \"Hello {{user_firstname}},<br><br>🎉 <strong>Welcome to {{product_name}}!</strong><br><br>We're excited to have you on board. Here are some quick tips to get you started:<br><br>• <strong>Explore the dashboard</strong> to see your workspace overview<br>• <strong>Invite team members</strong> to collaborate on your projects<br>• <strong>Check out our documentation</strong> for detailed guides<br><br>If you have any questions, don't hesitate to reach out to our support team.\",\n    \"facts\": [\n      {\"label\": \"Account Type:\", \"value\": \"Pro Plan\"},\n      {\"label\": \"Workspace:\", \"value\": \"Acme Corp\"},\n      {\"label\": \"Setup Status:\", \"value\": \"Complete\"}\n    ],\n    \"cta_primary\": {\n      \"label\": \"Get Started\",\n      \"url\": \"https://go.waymore.io/dashboard\"\n    },\n    \"cta_secondary\": {\n      \"label\": \"View Documentation\",\n      \"url\": \"https://docs.waymore.io\"\n    }\n  },\n  \"metadata\": {\n    \"tenantId\": \"acme_corp\",\n    \"eventId\": \"welcome_user\",\n    \"notificationType\": \"welcome\"\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/v1/emails",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "emails"]
            },
            "description": "Send an email using the transactional template. This is the main endpoint for sending emails through the gateway."
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  },
                  {
                    "key": "Idempotency-Key",
                    "value": "{{$timestamp}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"from\": {\n    \"email\": \"marketing@waymore.io\",\n    \"name\": \"Waymore Team\"\n  },\n  \"subject\": \"Welcome to Waymore Platform\",\n  \"template\": {\n    \"key\": \"transactional\",\n    \"locale\": \"en\"\n  },\n  \"to\": [\n    {\n      \"email\": \"{{recipient_email}}\",\n      \"name\": \"{{recipient_name}}\"\n    }\n  ],\n  \"variables\": {\n    \"workspace_name\": \"Acme Corp\",\n    \"user_firstname\": \"{{user_firstname}}\",\n    \"product_name\": \"{{product_name}}\",\n    \"support_email\": \"support@waymore.io\",\n    \"email_title\": \"Welcome to Waymore!\",\n    \"custom_content\": \"Hello {{user_firstname}},<br><br>🎉 <strong>Welcome to {{product_name}}!</strong><br><br>We're excited to have you on board. Here are some quick tips to get you started:<br><br>• <strong>Explore the dashboard</strong> to see your workspace overview<br>• <strong>Invite team members</strong> to collaborate on your projects<br>• <strong>Check out our documentation</strong> for detailed guides<br><br>If you have any questions, don't hesitate to reach out to our support team.\",\n    \"facts\": [\n      {\"label\": \"Account Type:\", \"value\": \"Pro Plan\"},\n      {\"label\": \"Workspace:\", \"value\": \"Acme Corp\"},\n      {\"label\": \"Setup Status:\", \"value\": \"Complete\"}\n    ],\n    \"cta_primary\": {\n      \"label\": \"Get Started\",\n      \"url\": \"https://go.waymore.io/dashboard\"\n    },\n    \"cta_secondary\": {\n      \"label\": \"View Documentation\",\n      \"url\": \"https://docs.waymore.io\"\n    }\n  },\n  \"metadata\": {\n    \"tenantId\": \"acme_corp\",\n    \"eventId\": \"welcome_user\",\n    \"notificationType\": \"welcome\"\n  }\n}",
                  "options": {
                    "raw": {
                      "language": "json"
                    }
                  }
                },
                "url": {
                  "raw": "{{base_url}}/api/v1/emails",
                  "host": ["{{base_url}}"],
                  "path": ["api", "v1", "emails"]
                }
              },
              "status": "Accepted",
              "code": 202,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"messageId\": \"msg_abc123\",\n  \"status\": \"queued\"\n}"
            }
          ]
        },
        {
          "name": "Send Email - Payment Success",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Idempotency-Key",
                "value": "{{$timestamp}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"from\": {\n    \"email\": \"marketing@waymore.io\",\n    \"name\": \"Waymore Team\"\n  },\n  \"subject\": \"Payment received for your Pro plan – Acme Corp\",\n  \"template\": {\n    \"key\": \"transactional\",\n    \"locale\": \"en\"\n  },\n  \"to\": [\n    {\n      \"email\": \"{{recipient_email}}\",\n      \"name\": \"{{recipient_name}}\"\n    }\n  ],\n  \"variables\": {\n    \"workspace_name\": \"Acme Corp\",\n    \"user_firstname\": \"{{user_firstname}}\",\n    \"product_name\": \"{{product_name}}\",\n    \"support_email\": \"support@waymore.io\",\n    \"email_title\": \"Payment Received\",\n    \"custom_content\": \"Hello {{user_firstname}},<br><br>✅ <strong>Payment received successfully!</strong><br><br>Thank you for your payment. Your Pro plan subscription has been renewed and is now active.\",\n    \"facts\": [\n      {\"label\": \"Amount:\", \"value\": \"$29.00\"},\n      {\"label\": \"Plan:\", \"value\": \"Pro Plan\"},\n      {\"label\": \"Billing Period:\", \"value\": \"Monthly\"},\n      {\"label\": \"Next Billing Date:\", \"value\": \"March 15, 2024\"}\n    ],\n    \"cta_primary\": {\n      \"label\": \"View Invoice\",\n      \"url\": \"https://go.waymore.io/billing\"\n    },\n    \"cta_secondary\": {\n      \"label\": \"Manage Subscription\",\n      \"url\": \"https://go.waymore.io/settings/billing\"\n    }\n  },\n  \"metadata\": {\n    \"tenantId\": \"acme_corp\",\n    \"eventId\": \"payment_success\",\n    \"notificationType\": \"billing\"\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/v1/emails",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "emails"]
            },
            "description": "Send a payment success notification email with billing details and invoice information."
          }
        },
        {
          "name": "Send Email - Usage Warning",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Idempotency-Key",
                "value": "{{$timestamp}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"from\": {\n    \"email\": \"marketing@waymore.io\",\n    \"name\": \"Waymore Team\"\n  },\n  \"subject\": \"You've used 80% of your Pro plan – Acme Corp\",\n  \"template\": {\n    \"key\": \"transactional\",\n    \"locale\": \"en\"\n  },\n  \"to\": [\n    {\n      \"email\": \"{{recipient_email}}\",\n      \"name\": \"{{recipient_name}}\"\n    }\n  ],\n  \"variables\": {\n    \"workspace_name\": \"Acme Corp\",\n    \"user_firstname\": \"{{user_firstname}}\",\n    \"product_name\": \"{{product_name}}\",\n    \"support_email\": \"support@waymore.io\",\n    \"email_title\": \"Usage Alert\",\n    \"custom_content\": \"Hello {{user_firstname}},<br><br>⚠️ <strong>You've used 80% of your Pro plan</strong><br><br>You're approaching your monthly limit. Consider upgrading to avoid any service interruption.\",\n    \"facts\": [\n      {\"label\": \"Current Usage:\", \"value\": \"80%\"},\n      {\"label\": \"Plan Limit:\", \"value\": \"10,000 requests\"},\n      {\"label\": \"Used:\", \"value\": \"8,000 requests\"},\n      {\"label\": \"Remaining:\", \"value\": \"2,000 requests\"}\n    ],\n    \"cta_primary\": {\n      \"label\": \"Upgrade Plan\",\n      \"url\": \"https://go.waymore.io/upgrade\"\n    },\n    \"cta_secondary\": {\n      \"label\": \"View Usage Details\",\n      \"url\": \"https://go.waymore.io/usage\"\n    }\n  },\n  \"metadata\": {\n    \"tenantId\": \"acme_corp\",\n    \"eventId\": \"usage_warning\",\n    \"notificationType\": \"usage\"\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/v1/emails",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "emails"]
            },
            "description": "Send a usage warning email when users approach their plan limits."
          }
        }
      ]
    },
    {
      "name": "Message Status",
      "item": [
        {
          "name": "Get Message Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/emails/status/msg_abc123",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "emails", "status", "msg_abc123"]
            },
            "description": "Get the status of a sent email message by its message ID."
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/v1/emails/status/msg_abc123",
                  "host": ["{{base_url}}"],
                  "path": ["api", "v1", "emails", "status", "msg_abc123"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"messageId\": \"msg_abc123\",\n  \"status\": \"delivered\",\n  \"timestamp\": \"2024-03-01T10:30:00Z\",\n  \"events\": [\n    {\n      \"type\": \"sent\",\n      \"timestamp\": \"2024-03-01T10:29:00Z\"\n    },\n    {\n      \"type\": \"delivered\",\n      \"timestamp\": \"2024-03-01T10:30:00Z\"\n    }\n  ]\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "System Health",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health",
              "host": ["{{base_url}}"],
              "path": ["health"]
            },
            "description": "Check the health status of the email gateway service."
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/health",
                  "host": ["{{base_url}}"],
                  "path": ["health"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"status\": \"healthy\",\n  \"timestamp\": \"2024-03-01T10:30:00Z\",\n  \"version\": \"1.0.0\"\n}"
            }
          ]
        },
        {
          "name": "Readiness Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/ready",
              "host": ["{{base_url}}"],
              "path": ["ready"]
            },
            "description": "Check if the service is ready to accept requests."
          }
        },
        {
          "name": "Metrics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/metrics",
              "host": ["{{base_url}}"],
              "path": ["metrics"]
            },
            "description": "Get service metrics and statistics."
          }
        }
      ]
    },
    {
      "name": "Admin Dashboard",
      "item": [
        {
          "name": "Admin Dashboard",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin",
              "host": ["{{base_url}}"],
              "path": ["admin"]
            },
            "description": "Access the admin dashboard for monitoring and management."
          }
        },
        {
          "name": "Admin API Data",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/api/data",
              "host": ["{{base_url}}"],
              "path": ["admin", "api", "data"]
            },
            "description": "Get admin dashboard data including statistics and recent activity."
          }
        }
      ]
    },
    {
      "name": "Webhooks",
      "item": [
        {
          "name": "Routee Webhook - Delivered",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"event\": \"delivered\",\n  \"messageId\": \"msg_abc123\",\n  \"timestamp\": \"2024-03-01T10:30:00Z\",\n  \"recipient\": \"{{recipient_email}}\",\n  \"provider\": \"routee\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/webhooks/routee",
              "host": ["{{base_url}}"],
              "path": ["webhooks", "routee"]
            },
            "description": "Simulate a Routee webhook for delivered email event."
          }
        },
        {
          "name": "Routee Webhook - Opened",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"event\": \"opened\",\n  \"messageId\": \"msg_abc123\",\n  \"timestamp\": \"2024-03-01T10:35:00Z\",\n  \"recipient\": \"{{recipient_email}}\",\n  \"provider\": \"routee\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/webhooks/routee",
              "host": ["{{base_url}}"],
              "path": ["webhooks", "routee"]
            },
            "description": "Simulate a Routee webhook for opened email event."
          }
        },
        {
          "name": "Routee Webhook - Clicked",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"event\": \"clicked\",\n  \"messageId\": \"msg_abc123\",\n  \"timestamp\": \"2024-03-01T10:40:00Z\",\n  \"recipient\": \"{{recipient_email}}\",\n  \"provider\": \"routee\",\n  \"url\": \"https://go.waymore.io/dashboard\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/webhooks/routee",
              "host": ["{{base_url}}"],
              "path": ["webhooks", "routee"]
            },
            "description": "Simulate a Routee webhook for clicked email event."
          }
        },
        {
          "name": "Routee Webhook - Bounced",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"event\": \"bounced\",\n  \"messageId\": \"msg_abc123\",\n  \"timestamp\": \"2024-03-01T10:30:00Z\",\n  \"recipient\": \"invalid@example.com\",\n  \"provider\": \"routee\",\n  \"reason\": \"invalid_email\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/webhooks/routee",
              "host": ["{{base_url}}"],
              "path": ["webhooks", "routee"]
            },
            "description": "Simulate a Routee webhook for bounced email event."
          }
        }
      ]
    },
    {
      "name": "AI Playground",
      "item": [
        {
          "name": "Generate Template with AI",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"description\": \"A welcome email for new users that includes their name, a welcome message, account details, and a button to get started\",\n  \"workspaceName\": \"Waymore\",\n  \"productName\": \"Waymore Platform\",\n  \"userName\": \"John\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/admin/ai/generate-template",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "ai", "generate-template"]
            },
            "description": "Generate email template JSON structure using AI based on natural language description."
          }
        },
        {
          "name": "Generate Payment Success Template",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"description\": \"A payment confirmation email with transaction details, amount, date, and receipt download link\",\n  \"workspaceName\": \"Waymore\",\n  \"productName\": \"Waymore Platform\",\n  \"userName\": \"John\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/admin/ai/generate-template",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "ai", "generate-template"]
            },
            "description": "Generate a payment success email template with transaction details and receipt link."
          }
        },
        {
          "name": "Generate Password Reset Template",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"description\": \"A password reset email with security instructions, reset link, and expiration notice\",\n  \"workspaceName\": \"Waymore\",\n  \"productName\": \"Waymore Platform\",\n  \"userName\": \"John\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/admin/ai/generate-template",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "ai", "generate-template"]
            },
            "description": "Generate a password reset email template with security instructions and reset link."
          }
        },
        {
          "name": "Generate Monthly Report Template",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"description\": \"A monthly analytics report email with key metrics, charts data, and insights\",\n  \"workspaceName\": \"Waymore\",\n  \"productName\": \"Waymore Platform\",\n  \"userName\": \"John\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/admin/ai/generate-template",
              "host": ["{{base_url}}"],
              "path": ["api", "admin", "ai", "generate-template"]
            },
            "description": "Generate a monthly report email template with analytics and metrics."
          }
        }
      ]
    }
  ]
}
